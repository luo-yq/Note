groupadd esgroup
useradd es -g esgroup -p es


su es
mkdir /opt
cd /opt

curl -L -O https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.1.1.tar.gz
tar -xvf elasticsearch-6.1.1.tar.gz
mv elasticsearch-6.1.1 elasticsearch
cd elasticsearch/bin

vi /opt/elasticsearch/config/elasticsearch.yml

#修改network.host: ip

vi ~/.bashrc

export ES_HOME=/opt/elasticsearch
export JAVA_HOME=/opt/jdk1.8
export PATH=$PATH:$JAVA_HOME/bin
export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib

source ~/.bashrc


./elasticsearch

./elasticsearch -d p ${ES_HOME}/pid  
kill `cat ${ES_HOME}/pid`

systemctl restart elasticsearch


brew install elasticsearch




./bin/elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.0.0/elasticsearch-analysis-ik-6.1.1.zip


wget https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.1.1/elasticsearch-analysis-ik-6.1.1.zip
unzip elasticsearch-analysis-ik-6.1.1.zip







http.cors.enabled: true
http.cors.allow-origin: "*"
http.cors.allow-headers: Authorization


sudo /opt/elasticsearch/bin/elasticsearch-plugin install mobz/elasticsearch-head  

 
cd /opt
wget https://codeload.github.com/mobz/elasticsearch-head/zip/master
cd elasticsearch-head
npm install
npm run start

cd /opt
wget https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.1.1/elasticsearch-analysis-ik-6.1.1.zip
unzip elasticsearch-analysis-ik-6.1.1.zip
mv elasticsearch-analysis-ik-6.1.1 $ES_HOME/plugins/analysis-ik

 
./bin/elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.1.1/elasticsearch-analysis-ik-6.1.1.zip


sysctl -w vm.max_map_count=262144

su
echo "vm.max_map_count=262144" > /etc/sysctl.conf
sysctl -p


\cp -f /etc/security/limits.conf /etc/security/limits.conf.bak
cat /etc/security/limits.conf | grep -v "es" > /tmp/system_limits.conf
echo "es hard nofile 65536" >> /tmp/system_limits.conf 
echo "es soft nofile 65536" >> /tmp/system_limits.conf 
mv -f /tmp/system_limits.conf /etc/security/limits.conf
su es
ulimit -Hn
 

cp build/distributions/elasticsearch-jieba-plugin-5.1.2.zip ${path.home}/plugins






firewall-cmd --zone=public --add-port=9100/tcp --permanent
firewall-cmd --zone=public --add-port=9200/tcp --permanent
firewall-cmd --reload


yum -y install java-1.8.0-openjdk*